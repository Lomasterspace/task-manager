<!-- templates/index.html -->
<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <title>–ú–µ–Ω–µ–¥–∂–µ—Ä –∑–∞–¥–∞—á</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="{{ url_for('static', filename='design.css') }}">
</head>
<body class="bg-gray-50">
    <div class="container mx-auto px-4 py-8 max-w-4xl">
        <!-- –ó–∞–≥–æ–ª–æ–≤–æ–∫ -->
        <div class="text-center mb-8">
            <h1 class="text-3xl font-bold text-gray-900">üìã –ú–µ–Ω–µ–¥–∂–µ—Ä –∑–∞–¥–∞—á</h1>
            <p class="text-gray-600 mt-2">–û—Ä–≥–∞–Ω–∏–∑—É–π—Ç–µ —Å–≤–æ–∏ –∑–∞–¥–∞—á–∏ –∏ –æ—Ç—Å–ª–µ–∂–∏–≤–∞–π—Ç–µ –ø—Ä–æ–≥—Ä–µ—Å—Å</p>
        </div>

        <!-- –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ -->
        <div class="grid grid-cols-1 md:grid-cols-3 gap-4 mb-8">
            <div class="bg-white p-4 rounded-lg shadow-sm border">
                <div class="flex items-center justify-between">
                    <div class="text-sm text-gray-500">–í—Å–µ–≥–æ –∑–∞–¥–∞—á</div>
                    <div class="w-6 h-6 bg-blue-100 rounded flex items-center justify-center">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 text-blue-600" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M9 5l7 7-7 7" />
                        </svg>
                    </div>
                </div>
                <div class="text-2xl font-bold mt-1">{{ tasks|length }}</div>
            </div>

            <div class="bg-white p-4 rounded-lg shadow-sm border">
                <div class="flex items-center justify-between">
                    <div class="text-sm text-gray-500">–ê–∫—Ç–∏–≤–Ω—ã—Ö</div>
                    <div class="w-6 h-6 bg-orange-100 rounded flex items-center justify-center">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 text-orange-600" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M9 5l7 7-7 7" />
                        </svg>
                    </div>
                </div>
                <div class="text-2xl font-bold mt-1">{{ tasks|selectattr('2', '==', False)|list|length }}</div>
            </div>

            <div class="bg-white p-4 rounded-lg shadow-sm border">
                <div class="flex items-center justify-between">
                    <div class="text-sm text-gray-500">–í—ã–ø–æ–ª–Ω–µ–Ω–æ</div>
                    <div class="w-6 h-6 bg-green-100 rounded flex items-center justify-center">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 text-green-600" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M5 13l4 4L19 7" />
                        </svg>
                    </div>
                </div>
                <div class="text-2xl font-bold mt-1">{{ tasks|selectattr('2', '==', True)|list|length }}</div>
            </div>
        </div>

        <!-- –ö–Ω–æ–ø–∫–∞ —Å–æ–∑–¥–∞–Ω–∏—è –∑–∞–¥–∞—á–∏ -->
        <div class="mb-6">
            <button class="bg-black text-white px-6 py-2 rounded-md font-medium flex items-center gap-2 hover:bg-gray-800 transition">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M12 6v6m0 0v6m0-6h6m-6 0H6" />
                </svg>
                –°–æ–∑–¥–∞—Ç—å –∑–∞–¥–∞—á—É
            </button>
        </div>

        <!-- –§–∏–ª—å—Ç—Ä—ã –∏ —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ -->
        <div class="bg-white p-4 rounded-lg shadow-sm border mb-6">
            <div class="flex flex-wrap gap-2 mb-4">
                <button class="px-4 py-2 bg-black text-white rounded-md text-sm font-medium">–í—Å–µ {{ tasks|length }}</button>
                <button class="px-4 py-2 bg-gray-100 text-gray-700 rounded-md text-sm font-medium">–ê–∫—Ç–∏–≤–Ω—ã–µ {{ tasks|selectattr('2', '==', False)|list|length }}</button>
                <button class="px-4 py-2 bg-gray-100 text-gray-700 rounded-md text-sm font-medium">–í—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã–µ {{ tasks|selectattr('2', '==', True)|list|length }}</button>
            </div>
            <div class="flex justify-end">
                <div class="relative">
                    <select class="appearance-none bg-gray-100 border border-gray-300 rounded-md px-3 py-2 pr-8 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500">
                        <option>–ü–æ –¥–∞—Ç–µ —Å–æ–∑–¥–∞–Ω–∏—è</option>
                        <option>–ü–æ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç—É</option>
                        <option>–ü–æ —Å—Ä–æ–∫—É</option>
                    </select>
                    <div class="pointer-events-none absolute inset-y-0 right-0 flex items-center px-2 text-gray-700">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M19 9l-7 7-7-7" />
                        </svg>
                    </div>
                </div>
            </div>
        </div>

        <!-- –°–ø–∏—Å–æ–∫ –∑–∞–¥–∞—á -->
        <div class="bg-white p-6 rounded-lg shadow-sm border">
            {% if tasks %}
                <ul class="space-y-3">
                    {% for task in tasks %}
                    <li class="border-b pb-3 last:border-b-0">
                        <div class="flex items-center justify-between">
                            <div class="flex items-center gap-3">
                                <input type="checkbox" onchange="window.location.href='/toggle/{{ task[0] }}'" {% if task[2] %}checked{% endif %}>
                                <span class="font-medium">{{ task[1] }}</span>
                                {% if task[3] %}
                                    <span class="inline-block px-2 py-1 text-xs bg-blue-100 text-blue-800 rounded-full">
                                        {{ task[3].capitalize() }}
                                    </span>
                                {% endif %}
                                {% if task[4] %}
                                    <small class="text-gray-500">‚è∞ {{ task[4] }}</small>
                                {% endif %}
                            </div>
                            <a href="/delete/{{ task[0] }}" class="text-red-500 hover:text-red-700 text-sm">–£–¥–∞–ª–∏—Ç—å</a>
                        </div>
                    </li>
                    {% endfor %}
                </ul>
            {% else %}
                <div class="text-center py-12">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-12 w-12 mx-auto text-gray-400 mb-4" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M9 5l7 7-7 7" />
                    </svg>
                    <p class="text-gray-500 mb-2">–ù–µ—Ç –∑–∞–¥–∞—á</p>
                    <p class="text-gray-400 text-sm">–°–æ–∑–¥–∞–π—Ç–µ —Å–≤–æ—é –ø–µ—Ä–≤—É—é –∑–∞–¥–∞—á—É, —á—Ç–æ–±—ã –Ω–∞—á–∞—Ç—å</p>
                </div>
            {% endif %}
        </div>
    </div>
</body>
</html>