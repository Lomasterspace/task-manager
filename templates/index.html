<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <title>–¢–∞—Å–∫-–º–µ–Ω–µ–¥–∂–µ—Ä</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body class="bg-light">
<div class="container mt-5">
    <h1 class="text-center mb-4">üìù –ú–æ–π –¢–∞—Å–∫-–º–µ–Ω–µ–¥–∂–µ—Ä</h1>
    <p class="text-end"><a href="/logout" class="btn btn-sm btn-outline-secondary">–í—ã–π—Ç–∏</a></p>

    <form method="POST" enctype="multipart/form-data" class="mb-4">
        <div class="input-group mb-2">
            <input type="text" name="title" class="form-control" placeholder="–ù–æ–≤–∞—è –∑–∞–¥–∞—á–∞..." required>
            <input type="file" name="file" class="form-control">
            <button type="submit" class="btn btn-success">–î–æ–±–∞–≤–∏—Ç—å</button>
        </div>
        <div class="row">
            <div class="col-md-4">
                <select name="priority" class="form-select">
                    <option value="low">–ù–∏–∑–∫–∏–π</option>
                    <option value="medium">–°—Ä–µ–¥–Ω–∏–π</option>
                    <option value="high">–í—ã—Å–æ–∫–∏–π</option>
                </select>
            </div>
            <div class="col-md-4">
                <input type="datetime-local" name="due_date" class="form-control">
            </div>
        </div>
    </form>

    <ul class="list-group">
        {% for task in tasks %}
        <li class="list-group-item {% if task[2] %}list-group-item-success{% endif %}">
            <div class="d-flex justify-content-between">
                <div>
                    <input class="form-check-input me-2" type="checkbox" onchange="window.location.href='/toggle/{{ task[0] }}'" {% if task[2] %}checked{% endif %}>
                    <strong>{{ task[1] }}</strong>
                    <span class="badge bg-{{ 'danger' if task[3]=='high' else 'warning' if task[3]=='medium' else 'secondary' }} ms-1">{{ task[3] }}</span>
                    {% if task[4] %}<small class="text-muted ms-2">–¥–æ {{ task[4] }}</small>{% endif %}
                    {% if task[5] %}<a href="/download/{{ task[0] }}" class="ms-2 text-info">üìé {{ task[5] }}</a>{% endif %}
                </div>
                <a href="/delete/{{ task[0] }}" class="btn btn-sm btn-outline-danger">–£–¥–∞–ª–∏—Ç—å</a>
            </div>
        </li>
        {% else %}
        <li class="list-group-item text-center text-muted">–ù–µ—Ç –∑–∞–¥–∞—á</li>
        {% endfor %}
    </ul>

    <hr>
    <p><a href="/messages" class="btn btn-primary">üí¨ –ü–µ—Ä–µ–π—Ç–∏ –≤ —á–∞—Ç</a></p>
</div>
</body>
</html>